<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Stack & Justify</title>
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/main.css">
	<!-- Remove the simple-mobile.css which is 404ing -->
	<link rel="stylesheet" href="css/mobile.css">
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üóúÔ∏è</text></svg>">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="Stack & Justify is a tool to help create type specimens by finding words or phrases of the same width. It is free to use and distributed under GPLv3 license.">
	<meta property="og:title" content="Stack & Justify">
	<meta property="og:description" content="Stack & Justify is a tool to help create type specimens by finding words or phrases of the same width. It is free to use and distributed under GPLv3 license.">
	<meta property="og:image" content="https://max-esnee.com/stack-and-justify/images/screenshot.png">
	<meta property="og:url" content="https://max-esnee.com/stack-and-justify/">
	<meta property="og:type" content="website">
	<!-- Immediate fix for mobile issues -->
	<style>
	@media screen and (max-width: 768px) {
		/* Fix the menu display on mobile */
		.menu-container .menu {
			position: relative !important;
			max-height: 300px !important;
			overflow-y: auto !important;
			border: 1px solid var(--fg-color) !important;
			border-radius: 4px !important;
			margin: 10px 0 !important;
			width: 100% !important;
			box-sizing: border-box !important;
		}

		/* Make the submenu content scrollable */
		.submenu-content {
			max-height: 200px !important;
			overflow-y: auto !important;
		}

		/* Fix text visibility */
		.specimen-line .text {
			opacity: 1 !important;
			visibility: visible !important;
			display: block !important;
			overflow-wrap: break-word !important;
			width: 100% !important;
		}
		
		.specimen-line .loading {
			display: none !important;
		}
		
		.line-middle-col {
			width: 100% !important;
			overflow: visible !important;
		}

		/* Fix checkboxes */
		input[type="checkbox"] {
			display: inline-block !important;
			appearance: checkbox !important;
			-webkit-appearance: checkbox !important;
			width: 20px !important;
			height: 20px !important;
			opacity: 1 !important;
			position: static !important;
			margin-right: 8px !important;
			vertical-align: middle !important;
		}

		.checkbox label::before {
			display: none !important;
		}

		/* Fix the header structure */
		.options, .features {
			display: block !important;
			margin-bottom: 15px !important;
			order: 2 !important;
		}
		
		/* Fix specimen display */
		.specimen {
			display: flex !important;
			flex-direction: column !important;
		}
		
		.specimen-header {
			display: flex !important;
			flex-direction: column !important;
			padding: 10px 0 !important;
		}
		
		.specimen-line {
			display: flex !important;
			flex-direction: column !important;
			padding: 10px 0 !important;
			margin-bottom: 10px !important;
		}
		
		.line-left-col, 
		.line-middle-col, 
		.line-right-col {
			width: 100% !important;
			padding: 5px 0 !important;
			display: flex !important;
			flex-wrap: wrap !important;
		}
		
		.line-middle-col {
			order: -1 !important; /* Move text to the top */
		}
	}
	</style>
	<!-- Matomo -->
	<script>
		var _paq = window._paq = window._paq || [];
		/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
		_paq.push(['trackPageView']);
		_paq.push(['enableLinkTracking']);
		(function() {
		var u="//max-esnee.com/stack-and-justify/analytics/";
		_paq.push(['setTrackerUrl', u+'matomo.php']);
		_paq.push(['setSiteId', '1']);
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
		})();
	</script>
	<!-- End Matomo Code -->
</head>
<body>
	<div id="app"></div>
	<script src="js/vendor/mithril.min.js"></script>
	<script>
	// Provide reference to handleFontFiles early
	window.handleFontFiles = function(files) {
		console.log("File handling stub created. Will be replaced when Fonts.js loads.");
	};
	</script>
	<script src="js/app.js" type="module"></script>
	<script src="js/mobileFix.js"></script>
	<script>
		console.log('%cüóúÔ∏è Stack & Justify\n%cCreated by Max Esn√©e\n%cVersion: 1.13\n%cSource code available at:\n%chttps://github.com/maxesnee/stack-and-justify', 
			'font-weight: bold; font-size: 24px; font-family: system-ui; line-height: 1.5; border-bottom: 1px solid; display:block;margin-bottom: 8px', 
			'font-family: system-ui',
			'font-family: system-ui',
			'font-family: system-ui',
			'font-family: monospace; color: #00b47c;');
	</script>
	<!-- Mobile fix helper script -->
	<script>
	// Helper function to make sure text displays on mobile
	document.addEventListener('DOMContentLoaded', function() {
		// Run the fix periodically
		setInterval(function() {
			if (window.innerWidth <= 768) {
				// Force text visibility
				document.querySelectorAll('.specimen-line .text').forEach(function(el) {
					el.classList.remove('hidden');
					el.classList.add('visible');
					el.style.opacity = '1';
				});
				
				// Hide loading indicators
				document.querySelectorAll('.specimen-line .loading').forEach(function(el) {
					el.classList.remove('visible');
					el.classList.add('hidden');
					el.style.opacity = '0';
				});
				
				// Fix menu display
				document.querySelectorAll('.options, .features').forEach(function(el) {
					el.style.display = 'block';
				});
			}
		}, 1000);
		
		// Also listen for font loading
		window.addEventListener('font-loaded', function() {
			setTimeout(function() {
				document.querySelectorAll('.specimen-line .text').forEach(function(el) {
					el.classList.remove('hidden');
					el.classList.add('visible');
					el.style.opacity = '1';
				});
			}, 500);
		});
	});
	</script>
</body>
</html>
